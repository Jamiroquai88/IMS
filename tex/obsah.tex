%=========================================================================
% (c) Michal Bidlo, Bohuslav K?ena, 2008

\chapter{Úvod}
V~tejto práci je rie¹ená implementácia modelu systému hromadnej obsluhy(ïalej len SHO)\cite{slajdy136} dopravného uzlu, pre implementáciu bol autormi zvolený model ¾elezniènej stanice (ïalej ako ®S) ®ilina na území Slovenskej Republiky. 
Na základe modelu a simulaèných experimentov bude znázornené chovanie systému zalo¾ené na podkladoch pre správu a~riadenie ®S.

\section{Autori projektu}

\subsection{Hlavní autori}
\begin{itemize}
\item Pavel Richtarik - xricht21@stud.fit.vutbr.cz
\item Ján Profant - xprofa00@stud.fit.vutbr.cz 
\end{itemize}

\subsection{Odborní konzultanti}
\begin{itemize}
\item Du¹an Kelo - údr¾bár ru¹òov
\item Bc. Jozef Gulík - redaktor vlaky.net\cite{vlakyWeb}
\item Vladimír ©nídl - redaktor DenníkN\cite{denniknWeb}
\end{itemize}
V¹etkým zmieneným konzultantom ïakujeme za pomoc pri vypracovávaní práce a~za veµmi prínosné odborné rady a~usmernenia. Poïakovanie taktie¾ patrí èlenom klubu vlaky.net\cite{vlakyWeb}.

\section{Validita modelu}
Validita modelu SHO bola overená experimentovaním s~modelom, výsledky experimentov odpovedali skutoènému za»a¾eniu ®elezniènej stanice ®ilina podµa grafikonov vlakovej dopravy (ïalej len GVD)\cite{gvdWiki} pre rok 2015\cite{gvdSR} a~plánov vlakotvorby nákladnej dopravy (ïalej len ND)\cite{PVND}.

\chapter{Rozbor témy a pou¾itých metód/technológií}
\section{Implementaèné nástroje}
Pre samotnú implementáciu modelu ®S ®ilina bol pou¾itý jazyk C++\cite{cppWeb} a~simulaèná kni¾nica SIMLIB3\cite{simlibWeb}, èím bolo dodr¾ané zadanie projektu.

\section{®eleznièná stanica ®ilina}
\label{sec:zszilina}
®S ®ilina slú¾i ako dôle¾itý dopravný uzol nielen vrámci Slovenska, ale takisto slú¾i ako hlavný spoj s Èeskou Republikou vrámci stredného Slovenska. Stanica le¾í na vetve panaeurópskeho dopravného koridoru Bratislava - U¾horod. Stanica bola otvorená v~roku 1871 vrámci výstavby Ko¹icko-Bohumínskej ¾eleznice. ®S ®ilina le¾í v km 337,632 elektrifikovanej dvojkoµajnej trate Kraµovany-Púchov s rozchodom 1435 mm.\\
Ide o ¾elezniènú stanicu podµa povahy práce\cite{vlakyZilinaWeb}:
\begin{itemize}
    \item  zmie¹anú,
 	\item zriaïovaciu,
	\item osobnú,
	\item odboènú pre trate:
	
	\begin{itemize}
		\item ®ilina - Èadca, ktorá je elektrifikovaná a dvojkoµajná.
    		\item ®ilina - Rajec, ktorá je bez trakèného vedenia a je jednokoµajná.
    \end{itemize}
    
 	\item dispoziènú pre trate:
 	\begin{itemize}
		\item ®ilina - Spi¹ská Nová Ves pre v¹etky vlaky. Pre vlaky, ktoré nezastavujú v ®S Spi¹ská Nová Ves je dispoziènou stanicou pre celý úsek po ®S Ko¹ice.
		\item ®ilina - Èadca pre v¹etky vlaky.
		\item ®ilina - Trenèianska Teplá pre v¹etky vlaky a pre nákladné vlaky, ktoré v ®S ®ilina zriaïovacia stanica a Trenèianska Teplá prechodia úsek a¾ po Leopoldov. Pre vlaky, ktoré nezastavujú v ®S Trenèianska Teplá, ani v ®S Leopoldov je dispoziènou stanicou pre celý úsek po ®S Bratislava hlavná stanica, Bratislava východ a Bratislava predmestie.
		\item ®ilina - Rajec pre v¹etky vlaky.
	\end{itemize}
	
\end{itemize}
Na stanici sa nachádz sedem nástupi¹», s~podchodovým viac úrovòovým prístupom\cite{vlakyZilinaWeb}:
\begin{itemize}
	\item Vyvý¹ené kryté nástupi¹te pri výpravnej budove je dlhé 200 m. Slú¾i pre vlaky pristavené na koµajach è. 9, 7, 5. Medzi koµajami è. 9 a è. 7 a è. 7 a è. 5 sa nachádzajú 2 vyvý¹ené nekryté nástupi¹tia typu SUDOP.
	\item Vyvý¹ené kryté nástupi¹te je dlhé 300 m. Slú¾i pre vlaky pristavené na koµajach è. 2 a è. 3.
	\item Vyvý¹ené kryté nástupi¹te je dlhé 150 m. Slú¾i pre vlaky pristavené na koµajach è. 4 a è. 10,
	\item Nekryté nástupi¹te typu SUDOP dlhé 200 m je pri slepej koµaji è.13.
	\item Nekryté nástupi¹te typu SUDOP dlhé 200 m je pri slepej koµaji è.15.
	\item Nekryté nástupi¹te typu SUDOP dlhé 160 m je pri slepej koµaji è.17.
	\item Nekryté nástupi¹te typu SUDOP dlhé 160 m je pri slepej koµaji è.19.
\end{itemize}

\section{Grafikon vlakovej dopravy}
\label{sec:gvd}
Vrámci modelovania systému boli pou¾ité GVD pre rok 2015\cite{gvdSR} obsahujúce vlakové trate\cite{vlakyTrateWeb} prechádzajúce cez ®S ®ilina, konkrétne:

\begin{itemize}
\item ®SR 126: ®ilina - Èadca\cite{tratCAWeb}
\item ®SR 120: Bratislava - ®ilina\cite{tratBAWeb}
\item ®SR 180: ®ilina - Ko¹ice\cite{tratKEWeb}
\item ®SR 127: ®ilina - Rajec\cite{tratRAWeb}
\end{itemize}

Na daných tratiach sa vyskytujú nasledujúce kategórie vlakov osobnej dopravy\cite{vlakWiki}:
\begin{itemize}
\item SuperCity (SC) - vlaky s~najvy¹¹ím ¹tandardom a~poskytovanými slu¾bami, najvy¹¹ou prioritou, ktorý nezastavuje na viac ako pä» minút, vyznaèuje sa vysokou prevádzkovou rýchlos»ou (v~Èesku vlakové súpravy Pendolino ÈD~r.~680).
\item EuroCity (EC) - medzi¹tátny vlak najvy¹¹ej kvality, ktorý sa svojimi parametrami (cestovná rýchlos», poèet zastavení, úroveò poskytovaných slu¾ieb a~pod.) odli¹uje od ostatných vlakov - slú¾i na rýchle spojenie významných miest alebo centier jednotlivých ¹tátov.
\item EuroNight (EN) - obdoba EC pre noèné spojenie.
\item InterCity (IC) - medzi¹tátny alebo vnútro¹tátny vlak vy¹¹ej kvality, ktorý sa svojimi parametrami (cestovná rýchlos», poèet zastavení, úroveò poskytovaných slu¾ieb a~pod.) odli¹uje od ostatných vlakov ni¾¹ích kategórií - slú¾i na rýchle spojenie významných miest, (centier) jednotlivých ¹tátov alebo vo vnútro¹tátnej preprave.
\item Expresný vlak (Ex) - dôle¾itý vlak, spájajúci významné miesta krajín a~¹tátov na veµké vzdialenosti.
\item Rýchlik (R) - vlak na rýchlu prepravu na väè¹ie vzdialenosti, zastavuje spravidla len v~dôle¾itých staniciach.
\item Osobný vlak (Os) - vlak, ktorý zabezpeèuje prepravu spravidla do v¹etkých staníc a~zastávok prechádzanej trate.
\end{itemize}

\section{Plán vlakotvorby nákladnej dopravy}
Pre úèely validity modelu bolo nevyhnutné do modelu zaradi» okrem osobnej vlakovej dopravy aj dopravu nákladnú. Aj napriek tomu, ¾e nákladné vlaky chodia väè¹inou podµa potreby a~zavádzajú sa operatívne. Takisto pravidelnos» nákladných vlakov je v tomto prípade otázna, existujú vlaky, ktoré chodia pravidelne a~vlaky, ktoré nejdú napríklad aj rok\cite{keloMail}. Je potrebné zobra» do úvahy fakt, ¾e ®S ®ilina nie je vlakotvorná stanica a~v¹etka zá»a¾ ND sa sústreïuje do neïalekej vlakotvornej stanice ®ilina-Teplièka\cite{PVND}.

Na základe plánu vlakotvorby ND\cite{PVND} mô¾me nákladné vlaky rozdeli» do nasledujúcich kategórii:
\begin{itemize}
\item Nákladný express (Nex) - vlak vy¹¹ej kvality urèený predov¹etkým na dopravu dôle¾itej zá»a¾e vrátane kombinovanej dopravy.
\item Priebe¾ný nákladný vlak (Pn) - vlak urèený na dopravu zá»a¾e medzi vlakotvornými stanicami, resp. medzi miestami nákladky a výkladky.
\item Manipulaèný vlak (Mn) - vlak urèený na obsluhu manipulaèných miest v~medziµahlých staniciach, nákladiskách a~vleèkách.
\item Vleèkový vlak (Vleè) - vlak urèený na obsluhu vleèiek.
\end{itemize}

\section{Poruchy vozòov a hnacích dráhových vozidiel}
Poruchy sú èastým zdrojom oneskorenia vlakov, èi u¾ osobných alebo nákladných. Udalos» poruchy vozòa alebo hnacích dráhových vozidiel (ïalej len HDV) doká¾e naru¹i» chod celej stanice, predov¹etkým vïaka ostrým obratom a~èasom vyhroteným na doraz\cite{keloMail}. Ako zdroj ¹tatistík o výskyte porúch nám poslú¾il web www.vlaky.net\cite{vlakyWeb}, a~ich databáza porúch HDV a~vozòov vedená od 14.6.2014\cite{poruchyWeb}.
Esenciálna pre nás bola då¾ka oneskorenia vlaku a~poèet záznamov poèas tohto èasového obdobia. Poruchy sme rozdelili do troch kategórii - malé (men¹ie ako 10 min), stredné (10 min - 30 min) a~vá¾ne (väè¹ie ako 30 min). \\
Pre ka¾dú kategóriu porúch sme pou¾ili nasledujúci vzorec a urèili frekvenciu výskytu poruchy:

\begin{displaymath}
frequency = \frac{number~of~days}{number~of~defects}
\end{displaymath}

Taktie¾ sme pre ka¾dú kategóriu poruchy vypoèítali jej priemerné trvanie:  

\begin{displaymath}
average = \frac{sum~of~time~needed~for~repair}{number~of~defects}
\end{displaymath}

Priemerný výskyt chýb a~ich trvanie sme uviedli do nasledujúcej tabuµky:

\begin{center}
    \begin{tabular}{| l | l | l |}
    \hline
    Záva¾nos» & Frekvencia výskytu & Då¾ka opravy \\ \hline
    malá & 24 dní & 2 min \\ \hline
    stredná & 41 dní & 19 min \\ \hline
    vá¾na & 11 dní & 80 min \\ \hline
    \end{tabular}
\end{center}

\section{Plán obsadenia koµají}
\label{sec:plan}
Priraïovanie konkrétnych koµají a~nástupi¹» je vopred dané. Ka¾dý rok sa pre konkrétnu ®S vypracuváva plán obsadenia koµají, kde sa pri ka¾dej koµaji eviduje, odkedy - dokedy má by» obsadená a ktorým vlakom, toto opatrenie zamedzuje prípadnému nedostatku nástupi¹». Plán obsadenia koµají má podobu grafu s 24 ¹tvorcovými hodinovými okienkami v ktorých sú úseèkami znázornené pobyty súprav vrámci ®S. Zmeny sa v¹ak èastokrát rie¹ia aj operatívne. \cite{keloMail} 
\\Koµaje sú rozdelené najmä na\cite{PVND}:
\begin{itemize}
\item Dopravné - slú¾ia pre vlaky na osobnú dopravu. ®S ®ilina má k dispozícii 36 dopravných koµají\cite{vlakyZilinaWeb}.
\item Manipulaèné - slú¾ia na nákladku, výkladku, odstraòovanie súprav a iné. ®© vyuzíva 24 manipulaèných koµají\cite{vlakyZilinaWeb}.
\item Koµaje bez nástupi¹» - slú¾ia pre nákladnú dopravu. v ®S ®ilina sa nachádzajú 4\cite{vlakyZilinaWeb}.
\end{itemize}

\chapter{Koncepcia modelu}

\section{Obsadzovanie koµají ¾elezniènej stanice ®ilina}
Pri modelovaní obsadzovania koµají vlakmi prichádzajúcimi alebo zaèínajúcimi v ®S ®ilina sme sa riadili sekciou~\ref{sec:zszilina}~a~\ref{sec:plan}. Samotné koµaje sú implementované pomocou triedy simlib3::Store\cite{simlibWeb} s kapacitou sedem koµají~\ref{sec:zszilina}. Fronta prichádzajúcich vlakov je v~prípade plného obsadenia zaradená do fronty simlib3::Queue~Q1\cite{simlibWeb}. Model ®S ®ilina nepoèíta s plánom obsadenia koµají~\ref{sec:plan}, z dôvodu, ¾e ®SR nám ho neboli ochotné sprístupni» ani vrámci edukatívnych úèelov.\\
Skutoènos», ¾e vlaky pou¾ívajú pre príchod na stanicu resp. odchod zo stanice v¾dy jednu spoloènú koµaj je implementovaná zariadením s výluèným prístupom, triedou simlib3::Facility\cite{simlibWeb}, prièom zariadenia sa nachádzajú na v¹etkých tratiach\ref{sec:gvd} v oboch smeroch.

\section{Model grafikonu vlakovej dopravy}
\label{sec:gvdmodel}
Model grafikonu vychádza z GVD 2015\cite{gvdSR} pre trate uvedené v kapitole 2.3. Pre úèely modelu ®S ®ilina sme GVD zjednodu¹ili a v¾dy uviedli len stanicu, s ktorou je konkrétna linka osobnej vlakovej dopravy prepojená (zastávky vlakov osobnej dopravy závisia od kategórie vlaku).\\
Zastávky na tratiach sú nasledujúce:

\begin{itemize}
\item ®SR 126: Brodno, Rudina, Kysucké Nové Mesto, Èadca, Èeský Tì¹ín, Bohumín\cite{tratCAWeb}
\item ®SR 120: Horný Hrièov, Bytèa, Pova¾ská Bystrica, Trenèín\cite{tratBAWeb}
\item ®SR 180: Vrútky, Kraµovany, Ru¾omberok\cite{tratKEWeb}
\item ®SR 127: ®ilina - Záreèie, ®ilina - Solinky\cite{tratRAWeb}
\end{itemize}

Veµmi dôle¾itým faktorom pri modelovaní GVD je me¹kanie linky. ©tatistiky o  me¹kaniach si vedie dopravca (®eleznièná spoloènos» Slovensko (ïalej ako ZSSK), RegioJet) a tieto informácie u¾ nie sú verejne dostupné. Jediný zdroj, ktorý sa tejto tematike venoval bol Vladimír ©nídl z Denníku N v èlánku z 23.6.2015\cite{snidlclanok}, ktorý nám následne sprístupnil údaje, ktoré mu boli spoloènos»ami poskytnuté\cite{snidlMail}.

\begin{center}
    \begin{tabular}{| p{1.5cm} | l | p{1.5cm} | p{1.5cm} | p{1.5cm} | p{1.5cm} | p{2cm} |}
    \hline
    Èíslo vlaku & Dopravca & Zme¹kané minúty február / Poèet vlakov & Zme¹kané minúty marec / Poèet vlakov & Zme¹kané minúty apríl / Poèet vlakov & Zme¹kané minúty máj / Poèet vlakov & Zme¹kané minúty spolu / Poèet vlakov spolu\\ \hline
    % 875/106= 499/109= 461/104= 191/18= 295/18= 93/19= 952/120= 1155/120= 1708/120= 1347/120= 1370/120= 820/120=
    IC 502 & ZSSK & 47/28 & 274/31 & 258/26 & 296/21 & 8.25 \\ \hline
    IC 504 & ZSSK & 25/24 & 179/31 & 60/28 & 235/26 & 4.58 \\ \hline
    IC 505 & ZSSK & 44/19 & 240/31 & 74/28 & 103/26 & 4.43 \\ \hline
    IC 1500 & ZSSK & 6/4 & 0/5 & 156/4 & 29/5 & 10.61 \\ \hline
    IC 1502 & ZSSK & 16/4 & 236/5 & 8/4 & 35/5 & 16.39 \\ \hline
    IC 1503 & ZSSK & 14/4 & 0/5 & 79/5 & 0/5 & 4.89 \\ \hline
    IC 400 & RegioJet & 358/28 & 270/31 & 228/30 & 96/31 & 7.93 \\ \hline
    IC 401 & RegioJet & 151/28 & 543/31 & 240/30 & 221/31 & 9.63 \\ \hline
    IC 402 & RegioJet & 240/28 & 733/31 & 404/30 & 331/31 & 14.23 \\ \hline
    IC 403 & RegioJet & 537/28 & 156/31 & 419/30 & 235/31 & 11.23 \\ \hline
    IC 404 & RegioJet & 225/28 & 528/31 & 397/30 & 220/31 & 11.42 \\ \hline
    IC 405 & RegioJet & 95/28 & 417/31 & 130/30 & 178/31 & 6.83 \\ \hline
    \end{tabular}
\end{center}

Dostupné údaje sa v¹ak týkajú len vlakov kategórie InterCity za obdobie február - máj 2015 prechádzajúce cez ®S Bratislava, preto sme pre ostatné kategórie vlakov urèili priemerné exponenciálne oneskorenie so stredom pa» minút. Model poèíta so skutoènos»ou, ¾e v¹etky vlaky, ktoré budú zaèína» zo ®S ®ilina, budú v potrebnom èase k dispozícii a preto budú ma» nulové oneskorenie. Model takisto predpokladá plnú dostupnos» v¹etkých vlakov v ®S ®ilina. To okrem iného znamená, ¾e v modeli zanedbávame situácie, ak sú jednotlivé linky na seba nejakým spôsobom naviazané (vlak prichádza do cieµovej stanice, kde má za istý èas vy¹tartova» ako iná linka, av¹ak má me¹kanie a nie je mo¾né, aby vy¹tartoval vèas a podobne).

\section{Model nákladnej dopravy}
Ako podklad pre modelovanie ND nám poslú¾il plán vlakotvorby ND\cite{PVND}. S~ohµadom na fakt, ¾e preva¾ná väè¹ina vlakov ND sa zavádza operatívne\cite{keloMail} a informácia, ¾e bude vypravený vlak ND sa èasto zadáva len hodinu pred odchodom vlaku, resp. hodinu pred odchodom mô¾e by» bez problémov odvolaná, sme sa rozhodli ND modelova» poissonovým procesom príchodov\cite{slajdy88}. Na urèenie èasu príchodov do systému sme pou¾ili plán vlakotvorby ND\cite{PVND}, kde sme vyhµadali v¹etky vlaky v¹etkých kategórií ND prechádzajúcich cez ®S ®ilina poèas jedného dòa.

\chapter{Architektúra simulaèného modelu}
Pali daèo napí¹e èo kázali pán farár dneska u luteránoch

\chapter{Podstata simulaèných experimentov a ich priebeh}
Podstatou simulaèných experimentov bolo dokáza» validitu ná¹ho modelu ®S ®ilina a~ potvrdi» resp. vyvráti» fakt, ¾e èasy a~vy»a¾enos» ®S ®ilina je nastavená na maximálnu mo¾nú úroveò a~prípadne vypracova» metodológie, ktoré by mohli pomôc» zvý¹i» efektivitu vlakovej dopravy.

\section{Postup experimentovania a okolnosti ¹túdie}
Overenie validity modelu sa bude sklada» z viacerých krokov, ktorými sa budeme sna¾i» èo najviac priblí¾i» reálnemu vy»a¾eniu ®S ®ilina a dokumentova» postupy a experimenty, ktorými by bolo mo¾né zefektívni» chod ®S ®ilina.

\section{Dokumentácia jednotlivých experimentov} 

\subsection{Me¹kanie vlakov osobnej dopravy}
Plán osobnej vlakovej dopravy vychádza z GVD pre rok 2015\cite{gvdSR} a dostupných ¹tatistík popísaných v sekcií~\ref{sec:gvdmodel}. Zmyslom tohto experimentu bolo dokáza», ¾e chovanie ná¹ho modelu sa s ohµadom na me¹kania pribli¾uje reálnemu systému ®S ®ilina.\\

V nasledujúcom experimente sme sledovali osobné vlaky InterCity, pre ktoré máme k dispozícií reálne ¹tatistiky popísané v kapitole~\ref{sec:gvdmodel}.

\subsection{Vplyv porúch na me¹kanie vlakov osobnej dopravy}
V nasledujúcem experimente sa pokúsime zisti» vplyv výskytu porúch na trati na me¹kanie vlakov osobnej dopravy. V experimente budeme postupne zvy¹ova» poèet výskytu v¹etkých troch druhov porúch 2x a následne a¾ 5x. 

\subsection{Vy»a¾enie koµají osobnej dopravy}
V nasledujúcom experimente sa pokúsime zisti» vy»a¾enos» koµají osobnej dopravy ®S ®ilina a simulova» situáciu, ¾e prichádzajúci vlak osobnej dopravy nebude ma» mo¾nos» hneï zabra» voµné nástupi¹te a bude musie» èaka» vo fronte na uvoµnenie nástupi¹»a.

\section{Záver experimentov}

\chapter{Záver}

%=========================================================================
